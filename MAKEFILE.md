# Makefile - –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–º–∞–Ω–¥

–ö—Ä–∞—Ç–∫–∏–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ –≤—Å–µ–º –∫–æ–º–∞–Ω–¥–∞–º Makefile –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–∞–º–∏.

## üìã –ë—ã—Å—Ç—Ä—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫

### –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã
```bash
make help
# –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ
make
```

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
make venv             # –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, install —Å–¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
make install          # –°–æ–∑–¥–∞—Ç—å venv (–µ—Å–ª–∏ –Ω–µ—Ç) –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

> üí° **–í–∞–∂–Ω–æ**: Makefile –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ `venv/`. –≠—Ç–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É `externally-managed-environment` –Ω–∞ macOS –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∏–∑–æ–ª—è—Ü–∏—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

## üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
make test             # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
make test-smoke       # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ smoke-—Ç–µ—Å—Ç—ã
make test-verbose     # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
```

### –ü–æ —Ä–∞–∑–¥–µ–ª–∞–º —á–µ–∫-–ª–∏—Å—Ç–∞
```bash
make test-general     # –ß–µ–∫-–ª–∏—Å—Ç: –û–±—â–µ–µ (7 —Ç–µ—Å—Ç–æ–≤)
make test-usability   # –ß–µ–∫-–ª–∏—Å—Ç: –£–¥–æ–±—Å—Ç–≤–æ —Å–∞–π—Ç–∞ (9 —Ç–µ—Å—Ç–æ–≤)
make test-layout      # –ß–µ–∫-–ª–∏—Å—Ç: –í—ë—Ä—Å—Ç–∫–∞ (10 —Ç–µ—Å—Ç–æ–≤)
```

### –ü–æ —Å–∞–π—Ç–∞–º
```bash
make test-elvirra     # –í—Å–µ —Ç–µ—Å—Ç—ã –¥–ª—è elvirra.ru
```

## üìä Allure-–æ—Ç—á—ë—Ç—ã

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä
```bash
make test-allure      # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ allure-results/
make allure-serve     # –û—Ç–∫—Ä—ã—Ç—å –æ—Ç—á—ë—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ (—Ç—Ä–µ–±—É–µ—Ç allure-results/)
make allure-generate  # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π HTML-–æ—Ç—á—ë—Ç –≤ allure-report/
make allure-open      # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –∏ —Å—Ä–∞–∑—É –æ—Ç–∫—Ä—ã—Ç—å –æ—Ç—á—ë—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```bash
# –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: —Ç–µ—Å—Ç—ã ‚Üí –æ—Ç—á—ë—Ç ‚Üí –ø—Ä–æ—Å–º–æ—Ç—Ä
make allure-open

# –ò–ª–∏ –ø–æ—à–∞–≥–æ–≤–æ
make test-allure      # 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
make allure-serve     # 2. –û—Ç–∫—Ä—ã—Ç—å –æ—Ç—á—ë—Ç
```

## üßπ –û—á–∏—Å—Ç–∫–∞

```bash
make clean            # –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à pytest –∏ __pycache__
make clean-venv       # –£–¥–∞–ª–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ venv/
make clean-allure     # –£–¥–∞–ª–∏—Ç—å allure-results/ –∏ allure-report/
make clean-all        # –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–∫—ç—à + Allure)
make clean-everything # –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –≤–∫–ª—é—á–∞—è venv
```

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
- `make clean` ‚Äî –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ, —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å —Å—Ç–∞—Ä—ã–π –∫—ç—à
- `make clean-venv` ‚Äî –¥–ª—è –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- `make clean-allure` ‚Äî –ø–µ—Ä–µ–¥ –Ω–æ–≤—ã–º –ø—Ä–æ–≥–æ–Ω–æ–º —Ç–µ—Å—Ç–æ–≤ –¥–ª—è —á–∏—Å—Ç–æ–≥–æ –æ—Ç—á—ë—Ç–∞
- `make clean-all` ‚Äî –ø–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º –∏–ª–∏ –¥–µ–ø–ª–æ–µ–º
- `make clean-everything` ‚Äî –ø–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –ø—Ä–æ–µ–∫—Ç–∞ (–≤–∫–ª—é—á–∞—è venv)

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞

```bash
make check            # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –≤—Å–µ—Ö Python-—Ñ–∞–π–ª–æ–≤
make lint             # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥ –ª–∏–Ω—Ç–µ—Ä–æ–º (flake8, –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
```

## üîÑ CI/CD –∫–æ–º–∞–Ω–¥—ã

```bash
make ci               # –ü–æ–ª–Ω—ã–π CI-–ø–∞–π–ø–ª–∞–π–Ω: –æ—á–∏—Å—Ç–∫–∞ ‚Üí —Ç–µ—Å—Ç—ã ‚Üí –æ—Ç—á—ë—Ç
```

–≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ:
```bash
make clean-all
make test-allure
make allure-generate
```

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏

### –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
```bash
make clean && make test-smoke
```

### –ü–æ–ª–Ω—ã–π –ø—Ä–æ–≥–æ–Ω —Å –æ—Ç—á—ë—Ç–æ–º
```bash
make clean-all && make allure-open
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞
```bash
make clean && make test-general
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ workflow

### –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞
```bash
# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
make test-smoke

# –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å –æ—Ç—á—ë—Ç–æ–º
make allure-open
```

### –ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
make check

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏ —Ç–µ—Å—Ç—ã
make clean-all && make test
```

### –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
```bash
# –ß–∏—Å—Ç—ã–π –ø—Ä–æ–≥–æ–Ω —Å –∫—Ä–∞—Å–∏–≤—ã–º –æ—Ç—á—ë—Ç–æ–º
make clean-all && make allure-open
```

## ‚ö†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –î–ª—è Allure-–∫–æ–º–∞–Ω–¥
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Allure CLI:
```bash
# macOS
brew install allure

# Linux
sudo apt-add-repository ppa:qameta/allure
sudo apt-get update
sudo apt-get install allure
```

### –î–ª—è lint-–∫–æ–º–∞–Ω–¥—ã
–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ flake8:
```bash
pip install flake8
```

## üîç –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ —Å–æ–∑–¥–∞—é—Ç—Å—è:
```
test_project/
‚îú‚îÄ‚îÄ allure-results/      # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ (–¥–ª—è allure serve)
‚îî‚îÄ‚îÄ allure-report/       # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π HTML-–æ—Ç—á—ë—Ç (–¥–ª—è allure generate)
```

–≠—Ç–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ —É–¥–∞–ª–∏—Ç—å —á–µ—Ä–µ–∑ `make clean-allure`.

## üìù –ü—Ä–∏–º–µ—Ä—ã –≤—ã–≤–æ–¥–∞

### –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—É—Å–∫
```bash
$ make test-smoke
–ó–∞–ø—É—Å–∫ smoke-—Ç–µ—Å—Ç–æ–≤...
pytest -m smoke -v
======================== test session starts ========================
...
======================== 26 passed in 45.23s ========================
```

### –° –æ—à–∏–±–∫–∞–º–∏
```bash
$ make test-smoke
–ó–∞–ø—É—Å–∫ smoke-—Ç–µ—Å—Ç–æ–≤...
pytest -m smoke -v
...
FAILED tests/sites/elvirra_ru/tests/test_general.py::TestGeneral::test_site_is_accessible
======================== 1 failed, 25 passed in 50.12s ========================
```

## üÜò Troubleshooting

### –û—à–∏–±–∫–∞: "externally-managed-environment"
**–†–µ—à–µ–Ω–∏–µ**: Makefile –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ. –ü—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
make install  # –°–æ–∑–¥–∞—Å—Ç venv –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

### –û—à–∏–±–∫–∞: "make: command not found"
**macOS/Linux**: Make –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é  
**Windows**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ WSL –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —á–µ—Ä–µ–∑ Chocolatey

### –û—à–∏–±–∫–∞: "allure: command not found"
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Allure CLI (—Å–º. —Ä–∞–∑–¥–µ–ª "–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è")

### –û—à–∏–±–∫–∞: "venv/bin/pytest: No such file or directory"
–í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–µ —Å–æ–∑–¥–∞–Ω–æ –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–æ. –í—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
make clean-venv  # –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä–æ–µ
make install     # –°–æ–∑–¥–∞—Ç—å –∑–∞–Ω–æ–≤–æ
```

### –ö–æ–º–∞–Ω–¥–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```bash
pwd  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: /path/to/test_project
ls Makefile  # –î–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å
```

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- **[README.md](README.md)** ‚Äî –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞
- **[QUICKSTART.md](QUICKSTART.md)** ‚Äî –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- **[START_HERE.md](START_HERE.md)** ‚Äî –Ω–∞—á–Ω–∏—Ç–µ –æ—Ç—Å—é–¥–∞
